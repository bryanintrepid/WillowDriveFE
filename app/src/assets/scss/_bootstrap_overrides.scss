// This file overrides Bootstrap's internal functions to fix deprecation warnings
// with newer versions of Sass.

@use "sass:color";
@use "sass:math";

// Override the luminance function to use color.channel instead of deprecated red(), green(), blue()
@function luminance($color) {
  $rgb: (
    "r": color.channel($color, "red"),
    "g": color.channel($color, "green"),
    "b": color.channel($color, "blue")
  );

  @each $key, $value in $rgb {
    @if $value <= 0.03928 {
      $value: $value / 12.92;
    } @else {
      $value: math.pow(($value + 0.055) / 1.055, 2.4);
    }
    $rgb: map-merge(
      $rgb,
      (
        $key: $value
      )
    );
  }

  @return (0.2126 * map-get($rgb, "r") + 0.7152 * map-get($rgb, "g") + 0.0722 * map-get($rgb, "b"));
}

// The contrast-ratio function depends on luminance, so it must be included here as well.
// This ensures that our overridden luminance function is used.
@function contrast-ratio($background, $foreground: color-contrast($background)) {
  $l1: luminance($background);
  $l2: luminance($foreground);

  @return if($l1 > $l2, ($l1 + 0.05) / ($l2 + 0.05), ($l2 + 0.05) / ($l1 + 0.05));
}
